<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üêâ DragonSoul Web - Game Logic Test</title>
    <style>
        body {
            background: #1a1a2e;
            color: #e0e0e0;
            font-family: 'Courier New', monospace;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }
        h1 { color: #e94560; text-align: center; }
        h2 { color: #0f3460; background: #e94560; padding: 8px 16px; border-radius: 4px; }
        #console {
            background: #16213e;
            border: 2px solid #0f3460;
            border-radius: 8px;
            padding: 16px;
            white-space: pre-wrap;
            font-size: 14px;
            max-height: 600px;
            overflow-y: auto;
            line-height: 1.6;
        }
        .pass { color: #4eff4e; font-weight: bold; }
        .fail { color: #ff4e4e; font-weight: bold; }
        .info { color: #4ecaff; }
        .skill { color: #ffcc4e; }
        .header { color: #e94560; font-weight: bold; font-size: 16px; }
        #stats {
            display: flex; gap: 20px; justify-content: center;
            margin: 20px 0; flex-wrap: wrap;
        }
        .stat {
            background: #16213e; border: 1px solid #0f3460;
            border-radius: 8px; padding: 16px 24px; text-align: center;
        }
        .stat-value { font-size: 32px; color: #e94560; font-weight: bold; }
        .stat-label { font-size: 12px; color: #888; margin-top: 4px; }
        #loading { text-align: center; font-size: 24px; color: #e94560; }
    </style>
</head>
<body>
    <h1>üêâ DragonSoul ‚Üí Web</h1>
    <p style="text-align:center; color:#888;">
        Code Java original compil√© en JavaScript via TeaVM ‚Äî z√©ro modification
    </p>
    
    <div id="stats">
        <div class="stat">
            <div class="stat-value" id="skill-count">...</div>
            <div class="stat-label">Skills Types</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="anim-count">...</div>
            <div class="stat-label">Animation Types</div>
        </div>
        <div class="stat">
            <div class="stat-value" id="js-size">...</div>
            <div class="stat-label">JS Size (KB)</div>
        </div>
    </div>
    
    <h2>Console Output</h2>
    <div id="loading">‚è≥ Loading DragonSoul...</div>
    <div id="console" style="display:none;"></div>

    <script>
        // Capture console output
        const consoleDiv = document.getElementById('console');
        const loadingDiv = document.getElementById('loading');
        
        function addLine(text) {
            let cls = '';
            if (text.includes('PASSED')) cls = 'pass';
            else if (text.includes('FAILED')) cls = 'fail';
            else if (text.includes('===')) cls = 'header';
            else if (text.includes('Test')) cls = 'info';
            else if (text.match(/^\s+\d+\.\s/)) cls = 'skill';
            
            const span = document.createElement('span');
            span.className = cls;
            span.textContent = text + '\n';
            consoleDiv.appendChild(span);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            
            // Extract stats
            const skillMatch = text.match(/Total skill types: (\d+)/);
            if (skillMatch) document.getElementById('skill-count').textContent = skillMatch[1];
            
            const animMatch = text.match(/Animation types: (\d+)/);
            if (animMatch) document.getElementById('anim-count').textContent = animMatch[1];
        }
        
        // Override console.info (TeaVM's output method)
        const origInfo = console.info;
        console.info = function(msg) {
            origInfo.apply(console, arguments);
            if (typeof msg === 'string') {
                msg.split('\n').forEach(line => addLine(line));
            }
        };
    </script>
    <script src="dragonsoul-logic.js" onload="
        loadingDiv.style.display = 'none';
        consoleDiv.style.display = 'block';
        document.getElementById('js-size').textContent = '178';
        
        // Run!
        try {
            main([]);
        } catch(e) {
            addLine('Error: ' + e.message);
        }
    "></script>
</body>
</html>
